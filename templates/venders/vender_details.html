{% extends "base.html" %}
{% load static %}

{% block head %}
<style>
  /* Vendor details page - minimal & consistent with site theme */
  .vendor-wrap { margin-top: 30px; margin-bottom: 40px; }
  .vendor-card {
    border-radius: 12px;
    padding: 18px;
    background: #fff;
    box-shadow: 0 12px 30px rgba(0,0,0,0.06);
  }

  .vendor-top {
    display:flex;
    gap:18px;
    align-items:center;
    flex-wrap:wrap;
  }

  .vendor-avatar {
    width: 160px;
    height:160px;
    border-radius:50%;
    object-fit:cover;
    border:6px solid #fff;
    box-shadow: 0 12px 30px rgba(0,0,0,0.08);
    background:#f6f6f6;
  }

  .vendor-info h1 { font-size:1.6rem; margin-bottom:6px; }
  .vendor-meta { color:#6c757d; margin-bottom:6px; }

  /* Menu grid */
  .menu-grid { margin-top:18px; display:grid; gap:18px; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); }
  .menu-card {
    background:#fff;
    border-radius:12px;
    overflow:hidden;
    box-shadow: 0 10px 28px rgba(0,0,0,0.06);
    display:flex;
    flex-direction:column;
    height:100%;
  }
  .menu-card img { width:100%; height:160px; object-fit:cover; }
  .menu-card .card-body { padding:12px; flex:1; display:flex; flex-direction:column; justify-content:space-between; }

  .menu-title { font-weight:700; margin-bottom:6px; }
  .menu-desc { color:#6c757d; font-size:0.95rem; margin-bottom:8px; }
  .menu-footer { display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:8px; }

  .badge-closed { background:#eee; color:#666; padding:6px 10px; border-radius:999px; font-weight:700; }

  .center-empty { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:28px; }
  .lottie-frame { width: 320px; max-width: 80%; }

  @media (max-width: 576px) {
    .vendor-avatar { width:120px; height:120px; border-width:4px; }
  }
</style>
{% endblock head %}

{% block start %}
<div class="container vendor-wrap">
  <div class="vendor-card">
    {% if vender.is_approved %}
      <!-- Approved vendor: show details + menu -->
      <div class="vendor-top">
        <div>
          {% if vender.restaurent_img %}
            <img src="{{ vender.restaurent_img.url }}" alt="{{ vender.restaurent_name }}" class="vendor-avatar" loading="lazy">
          {% else %}
            <img src="{% static 'images/placeholder.png' %}" alt="restaurant placeholder" class="vendor-avatar" loading="lazy">
          {% endif %}
        </div>

        <div class="vendor-info flex-fill">
          <h1>{{ vender.restaurent_name }}</h1>
          <div class="vendor-meta"><strong>Owner:</strong> {{ vender.user }}</div>
          <div class="vendor-meta"><strong>Address:</strong> {{ vender.address }}, {{ vender.city }}, {{ vender.state }} - {{ vender.zipcode }}</div>
          {% if vender.contact_no %}
            <div class="vendor-meta"><strong>Contact:</strong> {{ vender.contact_no }}</div>
          {% endif %}
        </div>
      </div>

      <hr>

      <h4 class="mb-3">Food Menu</h4>

      <div class="menu-grid">
        {% for food in fooditems %}
          <div class="menu-card">
            {% if food.food_img %}
              <img src="{{ food.food_img.url }}" alt="{{ food.food_name }}" loading="lazy">
            {% else %}
              <img src="{% static 'images/placeholder.png' %}" alt="placeholder" loading="lazy">
            {% endif %}

            <div class="card-body">
              <div>
                <div class="menu-title">{{ food.food_name }}</div>
                <div class="menu-desc">{{ food.food_desc }}</div>
              </div>

              <div class="menu-footer">
                <div><strong>â‚¹ {{ food.price }}</strong></div>

                {# you used an anchor for add-to-cart earlier; keep it as-is (no extra functionality) #}
                <div>
                  <a href="" class="btn btn-sm btn-info">Add to cart</a>
                </div>
              </div>
            </div>
          </div>
        {% empty %}
          <div class="menu-card center-empty">
            <p class="mb-2">No menu items available.</p>
          </div>
        {% endfor %}
      </div>

    {% else %}
      <!-- Not approved: show waiting state only -->
      <div class="center-empty">
        <iframe class="lottie-frame" src="https://lottie.host/embed/b0eea3f1-413f-4b3b-8d67-14c397947876/ka2qAYHUrC.lottie" frameborder="0" scrolling="no"></iframe>
        <p class="mt-3">This restaurant is waiting for admin approval.</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock start %}
